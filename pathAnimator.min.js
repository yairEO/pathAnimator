function PathAnimator(t,e){t&&(this.len=this.updatePath(t),this.timer=null,this.settings={duration:e.duration,step:e.step,reverse:!!e.reverse,startPercent:e.startPercent||0,onDone:e.onDone||function(){},easing:e.easing,fps:1e3/60})}PathAnimator.prototype={start:function(t,e){if(this.stop(),t=t||this.settings.startPercent||0,this.percent=t,0==this.settings.duration)return!1;var n=this,i=new Date;e=e||100;!function s(){var r,o,a=[],h=(new Date-i)/1e3/n.settings.duration;if("function"==typeof n.settings.easing&&(h=n.settings.easing(h)),o=t+h*(e-t),n.settings.reverse&&(o=t-h*(e-t))<0&&(o=e+o),n.running=!0,n.percent=o,h>.999)return n.stop(),n.percent=e,n.settings.onDone();a[0]=n.pointAt(n.percent-1),a[1]=n.pointAt(n.percent+1),r=180*Math.atan2(a[1].y-a[0].y,a[1].x-a[0].x)/Math.PI,n.timer=setTimeout(s,n.settings.fps),n.settings.step(n.pointAt(n.percent),r)}()},stop:function(){clearTimeout(this.timer),this.timer=null,this.running=!1},stopAt:function(t){},pointAt:function(t){return this.path.getPointAtLength(this.len*t/100)},updatePath:function(t){return!this.path&&t&&(this.path=document.createElementNS("http://www.w3.org/2000/svg","path"),this.path.setAttribute("d",t)),this.path.getTotalLength()}};
